<!DOCTYPE html>
<html lang="en-us">
  <head>
    <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-QZQ3JMT1YT"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-QZQ3JMT1YT');
</script>
    <meta name="robots" content="noindex" />
    <link rel="canonical" href="" />
    <meta charset="utf-8" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Unity WebGL Player | Mini Metro</title>

    <style type="text/css">
      html, body {
        margin: 0;
        padding: 0;
        width: 100%;
        height: 100%;
        overflow: hidden;
        background-color: #231f20;
      }
      .no-select {
        -webkit-touch-callout: none; /* iOS Safari */
        -webkit-user-select: none; /* Safari */
        -khtml-user-select: none; /* Konqueror HTML */
        -moz-user-select: none; /* Old versions of Firefox */
        -ms-user-select: none; /* Internet Explorer/Edge */
        user-select: none; /* Non-prefixed version, currently supported by Chrome, Edge, Opera and Firefox */
      }
      #unity-canvas {
        display: block; /* Removes whitespace at bottom */
        background: #231f20;
        width: 100%;
        height: 100%;
        position: absolute;
        top: 0;
        left: 0;
      }
    </style>

    <script type="text/javascript">
      setTimeout(function () {
        if (document.getElementsByTagName('canvas').length) {
          document.getElementsByTagName('body')[0].classList.add('no-select');
        }
      }, 2000);
      
      // Function to resize the canvas to full screen
      function resizeCanvas() {
        const canvas = document.getElementById('unity-canvas');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
      }
      window.addEventListener('resize', resizeCanvas);
    </script>
  </head>

  <body style="text-align: center">
    <canvas
      id="unity-canvas"
      style="background: #231f20"
    ></canvas>
    
    <script src="Build/webh5games.js"></script>
    <script>
      // Initialize Unity and adjust canvas size
      function initializeUnity() {
        const canvas = document.querySelector('#unity-canvas');
        resizeCanvas(); // Make sure the canvas is resized before Unity loads
        
        createUnityInstance(canvas, {
          dataUrl: 'Build/webh5games.data',
          frameworkUrl: 'Build/webh5games.framework.js',
          codeUrl: 'Build/webh5games.wasm',
          streamingAssetsUrl: 'StreamingAssets',
          companyName: 'Dinosaur Polo Club',
          productName: 'Mini Metro',
          productVersion: '2.51.0',
          matchWebGLToCanvasSize: true, // Ensures WebGL matches canvas size
        }).then(() => {
          // Resize again in case it's needed after Unity is loaded
          resizeCanvas();
        });
      }
      
      // Wait for document to be fully loaded before initializing
      document.addEventListener('DOMContentLoaded', initializeUnity);
    </script>

    <script>
      function fnSendMsg(evt) {
        if (typeof window.parent.postMessage == 'function') {
          window.parent.postMessage('keypress-from-game', '*');
        } else if (typeof window.top.postMessage == 'function' && window.top != window.self) {
          window.top.postMessage('keypress-from-game', '*');
        }
      }

      document.body.addEventListener('click', function (event) {
        fnSendMsg(event);
      });

      document.addEventListener('keypress', function (event) {
        fnSendMsg(event);
      });

      document.addEventListener('keydown', function (event) {
        fnSendMsg(event);
      });

      document.addEventListener('keyup', function (event) {
        fnSendMsg(event);
      });
    </script>
  </body>
</html>
